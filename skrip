-- ðŸ”¥ Card Counter Improved Version
-- Fitur: Modern UI, Auto, History, Minimize, FPS/Ping Monitor, Shortcut (M)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local VirtualInputManager = nil
pcall(function() VirtualInputManager = game:GetService("VirtualInputManager") end)
local VirtualUser = nil
pcall(function() VirtualUser = game:GetService("VirtualUser") end)

local LocalPlayer = Players.LocalPlayer

-- GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game:GetService("CoreGui")
ScreenGui.Name = "CardCounter"

local Frame = Instance.new("Frame")
Frame.Size = UDim2.new(0, 300, 0, 220)
Frame.Position = UDim2.new(0.5, -150, 0.2, 0)
Frame.BackgroundColor3 = Color3.fromRGB(25, 25, 30)
Frame.BorderSizePixel = 0
Frame.Active = true
Frame.Draggable = true
Frame.Parent = ScreenGui

Instance.new("UICorner", Frame).CornerRadius = UDim.new(0, 10)
local Stroke = Instance.new("UIStroke", Frame)
Stroke.Color = Color3.fromRGB(80,80,80)
Stroke.Thickness = 1.5

-- Title
local Title = Instance.new("TextLabel")
Title.Size = UDim2.new(1, -90, 0, 30)
Title.Position = UDim2.new(0, 10, 0, 0)
Title.BackgroundTransparency = 1
Title.Text = "Card Counter"
Title.Font = Enum.Font.GothamBold
Title.TextSize = 20
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextXAlignment = Enum.TextXAlignment.Left
Title.Parent = Frame

-- Minimize Button
local MinButton = Instance.new("TextButton")
MinButton.Size = UDim2.new(0, 25, 0, 25)
MinButton.Position = UDim2.new(1, -85, 0, 3)
MinButton.BackgroundColor3 = Color3.fromRGB(70, 70, 200)
MinButton.Text = "-"
MinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
MinButton.Font = Enum.Font.GothamBold
MinButton.TextSize = 18
MinButton.Parent = Frame
Instance.new("UICorner", MinButton).CornerRadius = UDim.new(0, 6)

-- Auto Button
local AutoButton = Instance.new("TextButton")
AutoButton.Size = UDim2.new(0, 25, 0, 25)
AutoButton.Position = UDim2.new(1, -56, 0, 3)
AutoButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
AutoButton.Text = "A"
AutoButton.TextColor3 = Color3.fromRGB(0, 0, 0)
AutoButton.Font = Enum.Font.GothamBold
AutoButton.TextSize = 18
AutoButton.Parent = Frame
Instance.new("UICorner", AutoButton).CornerRadius = UDim.new(0, 6)

-- Close Button
local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 25, 0, 25)
CloseButton.Position = UDim2.new(1, -28, 0, 3)
CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
CloseButton.Text = "X"
CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
CloseButton.Font = Enum.Font.GothamBold
CloseButton.TextSize = 18
CloseButton.Parent = Frame
Instance.new("UICorner", CloseButton).CornerRadius = UDim.new(0, 6)
CloseButton.MouseButton1Click:Connect(function()
	ScreenGui:Destroy()
end)

-- Recommendation
local Recommendation = Instance.new("TextLabel")
Recommendation.Size = UDim2.new(1, -20, 0, 35)
Recommendation.Position = UDim2.new(0, 10, 0, 35)
Recommendation.BackgroundTransparency = 1
Recommendation.Font = Enum.Font.GothamBold
Recommendation.TextSize = 28
Recommendation.TextColor3 = Color3.fromRGB(255, 255, 255)
Recommendation.Text = "Waiting..."
Recommendation.Parent = Frame

-- Info
local InfoLabel = Instance.new("TextLabel")
InfoLabel.Size = UDim2.new(1, -20, 1, -120)
InfoLabel.Position = UDim2.new(0, 10, 0, 70)
InfoLabel.BackgroundTransparency = 1
InfoLabel.Font = Enum.Font.Gotham
InfoLabel.TextSize = 16
InfoLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
InfoLabel.TextWrapped = true
InfoLabel.TextXAlignment = Enum.TextXAlignment.Left
InfoLabel.TextYAlignment = Enum.TextYAlignment.Top
InfoLabel.RichText = true
InfoLabel.Text = "Loading..."
InfoLabel.Parent = Frame

-- History
local HistoryLabel = Instance.new("TextLabel")
HistoryLabel.Size = UDim2.new(1, -20, 0, 60)
HistoryLabel.Position = UDim2.new(0, 10, 1, -65)
HistoryLabel.BackgroundTransparency = 1
HistoryLabel.Font = Enum.Font.Code
HistoryLabel.TextSize = 14
HistoryLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
HistoryLabel.TextWrapped = true
HistoryLabel.TextXAlignment = Enum.TextXAlignment.Left
HistoryLabel.TextYAlignment = Enum.TextYAlignment.Top
HistoryLabel.RichText = true
HistoryLabel.Text = "History:\n-"
HistoryLabel.Parent = Frame

local History = {}
local function addHistory(text)
	table.insert(History, 1, text)
	if #History > 5 then table.remove(History, #History) end
	HistoryLabel.Text = "History:\n" .. table.concat(History, "\n")
end

-- FPS & Ping Monitor
local Status = Instance.new("TextLabel")
Status.Size = UDim2.new(1, -20, 0, 20)
Status.Position = UDim2.new(0, 10, 1, -20)
Status.BackgroundTransparency = 1
Status.Font = Enum.Font.Gotham
Status.TextSize = 14
Status.TextColor3 = Color3.fromRGB(150, 150, 255)
Status.TextXAlignment = Enum.TextXAlignment.Left
Status.Text = "FPS: 0 | Ping: 0"
Status.Parent = Frame

-- Minimize
local Minimized = false
MinButton.MouseButton1Click:Connect(function()
	Minimized = not Minimized
	local goalSize = Minimized and UDim2.new(0, 300, 0, 40) or UDim2.new(0, 300, 0, 220)
	TweenService:Create(Frame, TweenInfo.new(0.3, Enum.EasingStyle.Quad), {Size = goalSize}):Play()
end)

-- Auto
local AutoOn = false
AutoButton.MouseButton1Click:Connect(function()
	AutoOn = not AutoOn
	local color = AutoOn and Color3.fromRGB(50,200,50) or Color3.fromRGB(255,255,255)
	local textColor = AutoOn and Color3.fromRGB(255,255,255) or Color3.fromRGB(0,0,0)
	TweenService:Create(AutoButton, TweenInfo.new(0.2), {BackgroundColor3 = color, TextColor3 = textColor}):Play()
	addHistory("[AUTO] " .. (AutoOn and "ENABLED" or "DISABLED"))
end)

-- Keyboard Shortcut (M)
UserInputService.InputBegan:Connect(function(input, gpe)
	if not gpe and input.KeyCode == Enum.KeyCode.M then
		AutoButton:Activate()
	end
end)

-- FPS & Ping Tracker
local frames, lastTime = 0, tick()
RunService.Heartbeat:Connect(function()
	frames += 1
	local now = tick()
	if now - lastTime >= 1 then
		local fps = frames / (now - lastTime)
		local ping = math.floor(Players.LocalPlayer:GetNetworkPing() * 1000)
		Status.Text = string.format("FPS: %d | Ping: %dms", math.floor(fps), ping)
		frames, lastTime = 0, now
	end
end)

-- ðŸ”‘ Advisor Update (ganti ini dengan updateAdvisor kamu)
local function updateAdvisor()
	-- contoh simulasi
	if math.random() > 0.5 then
		Recommendation.Text = "TAKE"
		Recommendation.TextColor3 = Color3.fromRGB(50,200,50)
		addHistory("Rekomendasi: TAKE")
	else
		Recommendation.Text = "HOLD"
		Recommendation.TextColor3 = Color3.fromRGB(200,50,50)
		addHistory("Rekomendasi: HOLD")
	end

	InfoLabel.Text = "Safe Draw Chance: 55%\nPoints Needed: 3\nOpponent Expected: 14\nRemaining Cards: <font color='#32C820'>2</font>, <font color='#C83220'>7</font>, <font color='#32C820'>4</font>"
end

RunService.RenderStepped:Connect(updateAdvisor)
